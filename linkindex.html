<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="UTF-8">
<title>Apertura de 7 Puertas</title>

<style>

/* ================================================= */
/* BLOQUE 2 — ESTILO GENERAL */
/* ================================================= */

body{
  font-family:Arial,sans-serif;
  background:linear-gradient(to bottom,#d6d6d6,#bfbfbf);
  display:flex;
  justify-content:center;
  align-items:center;
  margin:0;
  height:100vh;
}

.cuadro{
  background:white;
  padding:3rem;
  border-radius:15px;
  box-shadow:0 20px 40px rgba(0,0,0,0.35);
  text-align:center;
  width:98%;
  max-width:750px;
}

h2{
  font-size:4.5rem;
  margin-bottom:1rem;
  text-align:center;
}

.fecha-hora{
  display: flex;
  font-size:2.5rem;
  text-align:left;
  margin-bottom:1rem;
  gap:2rem;
  justify-content: flex-start;
  align-items: flex-start;
}

.fecha-hora-combinada{
  display: flex;
  flex-direction: column;
  gap:0.5rem;
}

.linea{
  display: flex;
  gap:1rem;
  align-items: center;
}

.panel{
  border-radius:15px;
  padding:1.5rem;
  margin-bottom:2rem;
  box-shadow:0 8px 18px rgba(0,0,0,0.25);
  position:relative;
  text-align: center;
}

.panel.portal{
  background:#e3f5ea;
  border:3px solid #145c2c;
}

.panel.apto{
  background:#e8edff;
  border:3px solid #1a3f9e;
}

.estadoPuerta{
  font-weight:bold;
  font-size:1.8rem;
  margin-bottom:1rem;
}

.botones{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:6rem;
  margin-top:2rem;
  flex-wrap:wrap;
}

button{
  width:250px;
  padding:1.6rem 0.5rem;
  font-size:2rem;
  border-radius:15px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  transition:all .15s;
  color:white;
  box-shadow:0 6px 12px rgba(0,0,0,0.4);
}

.btn-abrir{
  background:linear-gradient(to bottom,#1f7a3a,#0f4f23);
}

.btn-cerrar{
  background:linear-gradient(to bottom,#a32020,#5c0f0f);
}

button:disabled{
  background:#999!important;
  color:#555!important;
  box-shadow:none;
  cursor:not-allowed;
}

.habilitado{
  color:#0b7a2a;
  font-weight:bold;
}

.denegado{
  color:#b30000;
  font-weight:bold;
}

@media(max-width:700px){
  button{
    width:45%;
    font-size:1.7rem;
  }
}

</style>
</head>

<body>

<div class="cuadro">

<h2>Apertura de Puertas</h2>

<div class="fecha-hora">
<div>
Apartamento:
<span id="apartamento"></span>
<span id="estadoApartamento" style="font-weight:bold;"></span>
</div>
</div>

<!-- ✅ SOLO MODIFICADO AQUÍ -->
<div class="fecha-hora fecha-hora-combinada">

  <div class="linea">
    <span>Inicio:</span>
    <span id="fechaInicio"></span>
    <span id="horaInicio"></span>
  </div>

  <div class="linea">
    <span>Fin:</span>
    <span id="fechaFin"></span>
    <span id="horaFin"></span>
  </div>

</div>

<div class="panel portal">
<div style="font-size:2.5rem;font-weight:bold;">Puerta Portal</div>
<div class="estadoPuerta" id="estadoPortal"></div>
<div class="botones">
<button id="abrir" class="btn-abrir">Abrir</button>
<button id="apagar" class="btn-cerrar">Cerrar</button>
</div>
</div>

<div class="panel apto">
<div style="font-size:2.5rem;font-weight:bold;">Puerta Apartamento</div>
<div class="estadoPuerta" id="estadoApto"></div>
<div class="botones">
<button id="abrirApto" class="btn-abrir">Abrir</button>
<button id="apagarApto" class="btn-cerrar">Cerrar</button>
</div>
</div>

</div>

<script>

/* ========================== */
/* BLOQUE 12 — PARÁMETROS URL */
const params = new URLSearchParams(window.location.search);
const f1 = params.get('f1');
const h1 = params.get('h1');
const f2 = params.get('f2');
const h2 = params.get('h2');
const a = Math.min(Math.max(parseInt(params.get('a')),1),10) || 1;
const p = params.get('p') === '1';
const q = params.get('q') === '1';

/* ========================== */
/* BLOQUE 13 — REFERENCIAS DOM */
const btnAbrir = document.getElementById('abrir');
const btnApagar = document.getElementById('apagar');
const btnAbrirApto = document.getElementById('abrirApto');
const btnApagarApto = document.getElementById('apagarApto');
const estadoApartamento = document.getElementById('estadoApartamento');
const estadoPortal = document.getElementById('estadoPortal');
const estadoApto = document.getElementById('estadoApto');

/* ========================== */
/* BLOQUE 16 — FORMATEO FECHA */
function formatearFechaHora(f,h){
return{
fecha:f.slice(0,4)+'-'+f.slice(4,6)+'-'+f.slice(6,8),
hora:h.slice(0,2)+':'+h.slice(2,4)
};
}

const inicio=formatearFechaHora(f1,h1);
const fin=formatearFechaHora(f2,h2);

document.getElementById('apartamento').textContent=a;
document.getElementById('fechaInicio').textContent=inicio.fecha;
document.getElementById('horaInicio').textContent=inicio.hora;
document.getElementById('fechaFin').textContent=fin.fecha;
document.getElementById('horaFin').textContent=fin.hora;

</script>

</body>
</html>
